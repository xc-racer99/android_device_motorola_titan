From 41fd118d38de99348d4e50d97523e0fca8d7a407 Mon Sep 17 00:00:00 2001
From: Ricardo Cerqueira <ricardo@cyngn.com>
Date: Wed, 2 Dec 2015 10:37:05 +0000
Subject: [PATCH 1/2] Disable libfmjni on QC hardware

QCOM has its own implementation elsewhere

Change-Id: Ie810369453e9a4c8f6c65b40bec6eef73dbe75fc
---
 jni/fmr/Android.mk | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/jni/fmr/Android.mk b/jni/fmr/Android.mk
index 1700b4e..b685b68 100644
--- a/jni/fmr/Android.mk
+++ b/jni/fmr/Android.mk
@@ -31,5 +31,7 @@ LOCAL_SHARED_LIBRARIES := \
     libmedia \
 
 LOCAL_MODULE := libfmjni
-include $(BUILD_SHARED_LIBRARY)
 
+ifneq ($(BOARD_USES_QCOM_HARDWARE),true)
+include $(BUILD_SHARED_LIBRARY)
+endif
-- 
2.1.4


From 8ad677821dc5a700b59f6a9c618b30d4ba0b8904 Mon Sep 17 00:00:00 2001
From: Venkateshwarlu Domakonda <vdomak@codeaurora.org>
Date: Mon, 20 Jul 2015 20:28:49 +0530
Subject: [PATCH 2/2] Change the FM process ID

Change the process ID to system to get permission
to open the dev node and to run fm_dl service.

Change-Id: I26c03300788af883d2ebf93fed6b7eb0fc29f6c5
---
 AndroidManifest.xml | 1 +
 1 file changed, 1 insertion(+)

diff --git a/AndroidManifest.xml b/AndroidManifest.xml
index fa3e792..49c90c1 100644
--- a/AndroidManifest.xml
+++ b/AndroidManifest.xml
@@ -17,6 +17,7 @@
 
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="com.android.fmradio"
+    android:sharedUserId="android.uid.system"
     android:versionCode="2"
     android:versionName="2.0" >
 
-- 
2.1.4

